<!DOCTYPE html>
<html lang="">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Phenotype</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/animate.css">
<!--    <link rel="stylesheet" href="assets/css/globle-style.css">-->
    <link rel="stylesheet" href="assets/css/style.css"/>

</head>
<body>

<div class="contentWrapper">
    <section class="bannerWrapper">
        <nav class="navbar navbar-expand-lg fixed-top">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img width="120" src="./assets/img/logoWhite.svg" alt="logo"/>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
                    <ul class="navbar-nav mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="phoneday.html">Pheno Day</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="phenotyping.html">Phenotyping</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="mutation-events.html">Mutation Events</a>
                        </li>
                    </ul>
                    <ul class="list-inline rightNavbar ms-auto ">
                        <li class="list-inline-item">
                            <a class="nav-link" href="#">
                                <img src="assets/img/search.svg" alt="search-icon"/>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a class="nav-link" href="#">
                                <a class="nav-link" href="#">
                                    <img src="assets/img/profile.svg" alt="user-icon"/>
                                </a>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a class="nav-link">
                                <a class="nav-link" href="#">
                                    <img src="assets/img/bag.svg" alt="cart-icon"/>
                                </a>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="cSection banner">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-7 mb-5 mb-lg-0 wow fadeInUp">
                        <h1 class="mb-5">Disrupting Social Media</h1>
                        <p>Restoring our connection to each other</p>
                    </div>
                    <div class="col-lg-5 mb-5 mb-lg-0 wow zoomIn text-center">
                        <img class="img-fluid" src="./assets/img/Group.svg" alt=""/>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="cSection">
        <div class="container">
            <div class="text-center mb-5 wow fadeInUp">
                <h2 class="mb-4">Next Mutation Event</h2>
                <h3>See what mutation events are happening near you</h3>
            </div>
            <div class="cDivider">
                <hr/>
            </div>
            <div class="row align-items-center">
                <div class="col-lg-5 mb-5 mb-lg-0">
                    <ul id="eventListing" class="eventListing list-unstyled text-start"></ul>
                </div>
                <div class="col-lg-7 mb-5 mb-lg-0">
                    <div class="earthWrapper">
                        <div class="earthWrapper-in">
                            <div id="myearth"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="cDivider">
        <div class="container">
            <hr/>
        </div>
    </section>
    <section class="cSection">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-5 mb-5 mb-lg-0">
                    <div class="mb-5 wow fadeInUp">
                        <h2>What are Mutation Events?</h2>
                    </div>
                    <div class="mb-5 wow fadeInUp">
                        <p>
                            Once a month we assemble the most talented models, photographers, videographers, and
                            stylists from the tribe in different areas across the globe to disrupt social media. With
                            the sole purpose to generate awareness to protect nature.
                        </p>
                    </div>
                    <button class="btn btn-outline-primary">Next Event</button>
                </div>
                <div class="col-lg-7 mb-5 mb-lg-0 text-center wow zoomIn">
                    <div class="ratio ratio-16x9">
                        <video class="" autoplay muted loop preload playsinline>
                            <source src="assets/video4.mp4" type="video/mp4">
                        </video>
                    </div>
                    <!--                    <img class="img-fluid" src="./assets/img/main-qimg.svg" alt=""/>-->
                </div>
            </div>
        </div>
    </section>
    <section class="cDivider">
        <div class="container">
            <hr/>
        </div>
    </section>
    <section class="cSection">
        <div class="container">
            <div class="row align-items-center">

                <div class="col-lg-6 mb-5 mb-lg-0 text-center wow zoomIn">
                    <img class="img-fluid mb-3" src="./assets/img/art4.svg" alt=""/>
                    <h2><span class="count">1.9</span> million impressions</h2>
                </div>
                <div class="col-lg-6 mb-5 mb-lg-0">
                    <div class="mb-5 wow fadeInUp">
                        <h2 class="text-uppercase">pattern interruption</h2>
                    </div>
                    <div class="mb-5 wow fadeInUp">
                        <p>
                            Our mind is a predicting organ. In order to make the content we create together, spread, we
                            design an environment that fundamentally breaks what viewers are expecting to see. The
                            result is a viral campaign created together.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="cDivider">
        <div class="container">
            <hr/>
        </div>
    </section>
    <section class="cSection">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 mb-5 mb-lg-0">
                    <div class="mb-5 wow fadeInUp">
                        <h2>For Nature</h2>
                    </div>
                    <div class="mb-5 wow fadeInUp">
                        <p>
                            We partner with the leading organizations in environmental conservation and animal rescue to
                            make sure awareness for their objectives and funding objectives are met.
                        </p>
                    </div>
                    <button class="btn btn-outline-primary">Next Event</button>
                </div>
                <div class="col-lg-6 mb-5 mb-lg-0 text-center wow zoomIn">
                    <img class="img-fluid" src="./assets/img/art5.svg" alt=""/>
                </div>
            </div>
        </div>
    </section>
    <section class="cDivider">
        <div class="container">
            <hr/>
        </div>
    </section>
    <section class="cSection">
        <div class="container">
            <div class="text-center mb-5 wow fadeInUp">
                <h2 class="mb-4">Disrupting Social Media</h2>
            </div>
            <div class="wow zoomIn text-center">
                <div class="ratio ratio-16x9">
                    <video class="" autoplay muted loop preload playsinline>
                        <source src="assets/video3.mp4" type="video/mp4">
                    </video>
                </div>
<!--                <img class="img-fluid" src="./assets/img/art6.png" alt=""/>-->
            </div>
        </div>
    </section>
    <footer class="footer">
        <div class="container">
            <div class="row align-item-center">
                <div class="col-lg-4 mb-5">
                    <h3 class="mb-4">Quick Links</h3>
                    <ul class="list-unstyled">
                        <li class="">
                            <a class="nav-link"  href="phoneday.html">Pheno Day</a>
                        </li>
                        <li class="">
                            <a class="nav-link" href="phenotyping.html">Phenotyping</a>
                        </li>
                        <li class="">
                            <a class="nav-link" href="mutation-events.html">Mutation Events</a>
                        </li>
                    </ul>
                </div>
                <div class="col-lg-4 mb-5">
                    <h3 class="mb-4">Info</h3>
                    <ul class="list-unstyled">
                        <li class="">
                            <a class="nav-link" href="#">Privacy policy</a>
                        </li>
                        <li class="">
                            <a class="nav-link" href="#">Term of use</a>
                        </li>
                    </ul>
                </div>
                <div class="col-lg-4 mb-5">
                    <h3 class="mb-4">Our Mission</h3>
                    <p>To restore our connection to nature, each other, and witin</p>
                    <ul class="list-unstyled">
                        <li class="list-inline-item">
                            <a href="#"><i class="fa fa-instagram"></i></a>
                        </li>
                        <li class="list-inline-item">
                            <a href="#"> <i class="fa fa-twitter"></i></a>
                        </li>
                        <li class="list-inline-item">
                            <a  href="#"><i class="fa fa-linkedin"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="bottom-footer">
            <div class="container">
                <div class="col-12 text-center">
                    &copy; Phenotype 2023 All rights reserved.
                </div>
            </div>
        </div>
    </footer>
</div>

<script src="assets/js/jquery-3.7.0.min.js"></script>
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/wow.min.js"></script>
<script src="assets/js/typed.umd.js"></script>
<script src="assets/js/owl.carousel.min.js"></script>
<script src="assets/js/custom.js"></script>
<script src="./assets/js/miniature.earth.js"></script>

<!--Custom Map JS-->
<script>

    var allMarkers = [];
    window.addEventListener("earthjsload", function () {

        myearth = new Earth('myearth', {
            location: {lat: 20, lng: 90},
            light: 'none',
            mapLandColor: '#919191',
            mapSeaColor: '#212121'
        });
        var eventDetails = [
            {
                id: '1',
                location: {lat: 31.488407, lng: 74.400111},
                title: 'Mutation Event 1',
                country: 'Lahore, Pakistan',
                time: 'July 01, 2023'

            },
            {
                id: '2',
                location: {lat: -38.6, lng: 143.7},
                title: 'Mutation Event2',
                country: 'oria, Australia',
                time: 'July 01, 2023'

            },
            {
                id: '3',
                location: {lat: 64.0, lng: -19.7},
                title: 'Mutation Event 3',
                country: 'Southern , Iceland',
                time: 'July 09, 2023'
            },
            {location: {id: '4', lat: 46.7, lng: 9.8}, title: 'Mutation Event4', country: 'Grisons, 7272, Switzerland'},
            {location: {id: '5', lat: 37.7, lng: -119.5}, title: 'Mutation Event5', country: 'California, USA'}
        ];


        myearth.addEventListener("ready", function () {
            // add details overlay
            detail_overlay = this.addOverlay({
                content: '<div id="earthPopover" class="earthPopover">' +
                    '<div class="header">' +
                    '<div class="d-flex align-items-center"><img class="logo" alt="eventLogo" src="./assets/img/eventlogo.svg"> <span class="eventTitle"></span> </div>' +
                    '<div id="close-photo" onclick="closePhoto(); event.stopPropagation();"></div>' +
                    '</div>' +
                    '<div class="body">' +
                    '<div class="row align-items-center">' +
                    '<div class="col-7"><p class="eventLocation"></p><p class="eventTime"></p></div>' +
                    '<div class="col-5 text-end"><button class="btn btn-outline-primary btn-sm">RSVP</button></div>' +
                    '</div>' +
                    '</div>' +
                    '</div>',
                visible: false,
                containerScale: 0,
                depthScale: 0.5
            });
            // add photo pins


            for (var i = 0; i < eventDetails.length; i++) {
                var marker = this.addMarker({
                    mesh: "Marker",
                    color: (i % 2 == 0) ? '#3a6a39' : '#6a5739',
                    id: eventDetails[i].id,
                    location: eventDetails[i].location,
                    scale: 0.01,
                    offset: 1.6,
                    visible: false,
                    transparent: true,
                    hotspot: true,
                    hotspotRadius: 0.75,
                    hotspotHeight: 1.3,
                    // custom property
                    event_info: eventDetails[i],
                });
                console.log("markerfkdjfkdj", allMarkers);
                // const newMarker = new marker.earth();
                // console.log({newMarker})
                // markers[i] = marker;

                allMarkers.push(marker);
                marker.addEventListener('click', openDetailViaMarker);

                // marker.addEventListener('click', function() {
                //     openPhoto(eventDetails[i].title, eventDetails[i].location);
                // }.bind(i));
                // $("#eventListing").append("<li class='mb-3'><button onclick='OpenEventDetails(\""+ marker+ "\")' class='btn btn-primary'><img class='me-3' alt='eventLogo' src='./assets/img/eventlogo.svg'>  "+ eventDetails[i].title +"</button></li>");
                // $("#eventListing").append("<li class='mb-3'><button onclick='OpenEventDetails(\""+ marker.id + "\",\""+ eventDetails[i].title + "\", \""+ JSON.stringify(marker.location.lat) + "\", \""+ JSON.stringify(marker.location.lng) + "\" , \""+ marker.distance + "\", \""+ JSON.stringify(marker.elementPosition) + "\")' class='btn btn-primary'><img class='me-3' alt='eventLogo' src='./assets/img/eventlogo.svg'>  "+ eventDetails[i].title +"</button></li>");
                // animate marker
                // $("#eventListing").append(`<li class='mb-3'><button  onclick="testcall(${marker})" class='btn btn-primary'><img class='me-3' alt='eventLogo' src='./assets/img/eventlogo.svg'>  "+ eventDetails[i].title +"</button></li>`);

                $("#eventListing").append(
                    `<li class="mb-3"><button onclick="OpenEventDetails(${i})" class="btn btn-primary"><img class="me-3" alt="eventLogo" src="./assets/img/eventlogo.svg">  ${eventDetails[i].title}</button></li>`
                );
                setTimeout((function () {
                    this.visible = true;
                    this.animate('scale', 0.9, {duration: 140});
                    this.animate('offset', 0, {duration: 1100, easing: 'bounce'});
                }).bind(marker), 280 * i);
            }
        });

        // close photo overlay when navigating away
        myearth.addEventListener("change", function () {
            if (!current_marker || auto_rotate) return;
            if (Earth.getAngle(myearth.location, current_marker.location) > 45) {
                closePhoto();
            }
        });
    });


    var current_marker, auto_rotate;
    function openDetailViaMarker() {
        console.log("this", this);
        // return;
        // close current photo
        if (current_marker) {
            closePhoto();
            window.setTimeout(openDetailViaMarker.bind(this), 120);
            return;
        }
        // rotate earth if needed
        if (myearth.goTo(this.location, {
            relativeDuration: 100, approachAngle: 12, end: function () {
                auto_rotate = false;
            }
        })) {
            auto_rotate = true;
        }
        $(".eventTitle").text(this.event_info.title);
        $(".eventLocation").text(this.event_info.country);
        $(".eventTime").text(this.event_info.time);
        // $(".eventTitle").text(title);
        detail_overlay.location = this.location;
        detail_overlay.visible = true;
        setTimeout(function () {
            document.getElementById('earthPopover').className = 'photo-appear';
        }, 120);
        this.animate('scale', 0.001, {duration: 150});
        current_marker = this;
    }



    function OpenEventDetails(currentMaker) {
        console.log("here is all maker", allMarkers);
        console.log('marker__ ' , allMarkers[currentMaker]);
        // return;
        openPhoto.bind(allMarkers[currentMaker])();
        // console.log('marker__ ', marker);

        //   var test =  document.getElementsByClassName('test_1');
        // console.log('marker__ ', test);
        // $(".test_1").click();

        // let marker = markers[0];
        // $('#' + markers[0].id).trigger('click');
        // openPhoto();
        // document.getElementById('pop1').click();
        /*setTimeout(function () {
            document.getElementById('earthPopover').className = 'photo-appear';
        }, 120);
        marker.animate('scale', 0.001, {duration: 150});
        current_marker = marker;*/

    }

    function openPhoto() {


        if (current_marker && current_marker !== false) {
            closePhoto();
            window.setTimeout(openPhoto.bind(this), 120);
            return;
        }
        // rotate earth if needed

        if (myearth.goTo(this.location, {
            relativeDuration: 100, approachAngle: 12, end: function () {
                auto_rotate = false;
            }
        })) {
            auto_rotate = true;
        }
        $(".eventTitle").text(this.event_info.title);
        $(".eventLocation").text(this.event_info.country);
        $(".eventTime").text(this.event_info.time);
        detail_overlay.location = this.location;
        detail_overlay.visible = true;
        setTimeout(function () {
            document.getElementById('earthPopover').className = 'photo-appear';
        }, 120);
        this.animate('scale', 0.001, {duration: 150});
        current_marker = this;
    }


    function closePhoto() {
        if (!current_marker) return;
        document.getElementById('earthPopover').className = '';
        setTimeout((function () {
            detail_overlay.visible = false;
            this.opacity = 0.7;
            this.animate('scale', 1, {duration: 150});
        }).bind(current_marker), 100);
        current_marker = false;
    }
</script>

</body>
</html>
